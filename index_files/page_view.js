"use strict";$(function(){if($.ajaxSetup({error:function(t){}}),$(".wenben .textFilter").each(function(t,e){var o=$(this);o.html().trim()===o.data("placeholder")&&o.html("")}),function(){var t=$(".bodybg").data("src");t&&$("<img/>",{src:t}).on("load",function(e){var o=$(this);if(o[0].complete){var i=$(".bodybg");setTimeout(function(){i.css("backgroundImage","url("+t+")"),o.remove()},5)}})}(),$(".view_content iframe,.view_content embed").width("100%"),$("img.lazy").lazyload({threshold:100,failure_limit:1,effect:"fadeIn"}),$(".view_separatormk .js_title").each(function(t,e){var o=$(e),i=o.text(),a=o.width(),n=i.replace(/[\u0391-\uFFE5]/g,"aa").length,r=21;a<n*r/2&&o.html('<marquee scrolldelay="300">'+o.html()+"</marquee>")}),$("input.form_timeTrigger").datetimepicker({timepicker:!1,lang:"ch",format:"Y-m-d",yearStart:"1930",maxDate:"+1970/01/01"}),$("a.img_a_trigger").on("click",function(t){$com.stopPop(t),$(this).hasClass("show_image")||(location.href=$(this).data("href"))}),"undefined"!=typeof PhotoSwipe){var t=$("#photoswipeDialog")[0],e=[],o={pinchToClose:!1,closeOnScroll:!1,closeOnVerticalDrag:!1};$(".show_image").each(function(t,o){var i=$(o).prop("href")||$(o).data("href");25!==i.length&&(e.push({src:i,w:100,h:100}),$.get(i+"?imageInfo",function(o){e[t].w=o.width,e[t].h=o.height}))}).on("click",function(i){$com.stopPop(i);var a=$(this).prop("href")||$(this).data("href"),n=-1;if($.each(e,function(t,e){if(e.src===a)return n=t,!1}),n!==-1){o.index=n;var r=new PhotoSwipe(t,PhotoSwipeUI_Default,e,o);r.init()}})}if($("a.initMap").each(function(t,e){var o=$(e),i=o.parents(".view_content").find(".divAddress").data("address");i=encodeURIComponent(i),o.prop("href",String.format("http://api.map.baidu.com/geocoder?address={0}&output=html",i)).children().prop("src",String.format("http://api.map.baidu.com/staticimage?width=420&height=360&center={0}&zoom=15&markers={1}&markerStyles=L",i,i))}),$("form").on("submit",function(t){t.preventDefault();var e=$(this);$.post(e.prop("action"),e.serialize(),function(t){t.key?(e[0].reset(),e.find("input[name='sex']").val("男").end().find("div.radio").eq(0).addClass("down").end().eq(1).removeClass("down"),$com.noty.ok("提交表单成功，感谢您的参与.",{layout:"center"})):$com.noty.error("提交表单失败，错误原因:"+t.value)},"json")}).find(".sex").on("click",function(t){var e=$(this),o=e.next();o.val("男"===o.val()?"女":"男"),e.find("div.radio").toggleClass("down")}).end().find(".btn_form_submit").on("click",function(t){var e=$(this).parent().parent(),o=e.find("input:visible"),i=!1;try{o.each(function(t,e){var o=$(this).val();if(""===o)throw"表单有选项未填写，请完整填写表单。";var i=$(this).data("length");if(i&&o.length>i)throw $(this).prop("placeholder").substring(3)+"字段长度超出限制，该字段最长为 "+i+" 个字符，请重新填写。";var a=$(this).data("valid");if(a)switch(a){case"email":if(!$com.validate.isEmail(o))throw"邮箱地址格式错误，请重新填写。";break;case"phone":if(!$com.validate.isMobile(o)&&!$com.validate.isTel(o))throw"电话号码格式错误，请重新填写。";break;case"qq":if(!$com.validate.isQQ(o))throw"QQ号码格式错误，请重新填写。";break;case"date":var n=moment(new Date(o));if(!n.isValid())throw"日期格式错误，请重新填写。";$(this).val(n.format("YYYY-M-D"))}}),i=!0}catch(t){$com.noty.error(t+"<br/><br/>点击关闭提示",{layout:"center"})}i&&$(this).parent().parent().trigger("submit")}),$(window).on("scroll",function(){$(window).scrollTop()>100?($(".shortcut").show(),$(".w_contentr").css("top","10px"),$(".view_toptool").addClass("fixed")):($(".shortcut").hide(),$(".backtop").addClass("bottomin").removeClass("topout"),$(".w_contentr").css("top","115px"),$(".view_toptool").removeClass("fixed"))}),screen.width<700){$(".view_threepoto .view_content .clear").remove();var i={dots:!0,arrows:!1};5===$("body").data("theme-id")&&(i.centerMode=!0,i.centerPadding="60px"),$(".view_threepoto .view_content").slick(i)}if($("#btn_audio_controller").length>0){var a=$("#bgAudio")[0];if($("#btn_audio_controller").on("click",function(t){t.stopPropagation(),a.paused?($(this).prop("src",IMG_CDN_URL+"musicbg_open.gif"),a.play()):($(this).prop("src",IMG_CDN_URL+"musicbg_close.png"),a.pause())}),$(a).prop("autoplay")){var n=function(){a.paused&&a.play()};$(document).one("WeixinJSBridgeReady",function(){n()},!1),$(document).one("DOMContentLoaded",function(){n()}),$(document).one("touchstart",function(){n()}),n()}}"undefined"!=typeof Hls&&Hls.isSupported()&&$("video").each(function(t,e){var o=new Hls({autoStartLoad:!1});o.loadSource($(e).prop("src")),o.attachMedia(e),$(e).one("play",function(){o.startLoad()})}),$.colorbox&&$("#btn_report").colorbox({iframe:!0,width:"80%",height:"90%"})});